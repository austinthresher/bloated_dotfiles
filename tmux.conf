COL="#{?#{!=:$TMUX_COLOR,},${TMUX_COLOR},green}"
set -g default-terminal 'tmux-256color'
set -ga terminal-overrides ',tmux-256color:Tc,sitm=\E[3m'
set -ga terminal-overrides ',xterm-256color:Tc,sitm=\E[3m'
set -ga terminal-overrides ',stterm-256color:Tc,sitm=\E[3m'
set -g mouse on
set -g status-keys vi
set -g status-interval 1
set -g base-index 1
set -g pane-base-index 1
set -g status-position top
setw -g mode-keys vi
set -gF status-style "bg=default,fg=${COL}"
L="#{?#{==:#{client_key_table},off},  |  #[fg=white]Locked,}"
set -g status-left "  %-I:%M  |  %b %d${L}"
set -g status-left-length 32
set -g status-right "#H  #[reverse] #{window_name} #[noreverse]"
set -g status-justify centre
set -g window-status-current-format ""
set -gF window-status-style "fg=${COL}"
set -g window-status-format " [F#{window_index}] #{window_name} "
set -g window-status-separator ""
set -gF pane-active-border-style "bg=default,fg=${COL}"
set -gF pane-border-style "bg=default,fg=colour8"
set -g escape-time 0

bind-key -n F1 if-shell 'tmux select-window -t :1' '' 'new-window -t :1'
bind-key -n F2 if-shell 'tmux select-window -t :2' '' 'new-window -t :2'
bind-key -n F3 if-shell 'tmux select-window -t :3' '' 'new-window -t :3'
bind-key -n F4 if-shell 'tmux select-window -t :4' '' 'new-window -t :4'
bind-key -n F5 if-shell 'tmux select-window -t :5' '' 'new-window -t :5'
bind-key -n F6 if-shell 'tmux select-window -t :6' '' 'new-window -t :6'
bind-key -n F7 if-shell 'tmux select-window -t :7' '' 'new-window -t :7'
bind-key -n F8 if-shell 'tmux select-window -t :8' '' 'new-window -t :8'

set-option -g prefix `
bind-key ` send-prefix

bind-key s split-window -h
bind-key v split-window -v

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# "lock" the pane hotkeys so a nested session can use them
bind-key -n F12 \
    set prefix None \; \
    set key-table off \; \
    if -F '#{pane_in_mode}' 'send-keys -X cancel' \; \
    refresh-client -S \;

bind -T off F12 \
    set -u prefix \; \
    set -u key-table \; \
    refresh-client -S
